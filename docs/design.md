# êµì‚¬ìš© ì‹œê°„í‘œ êµì²´ í”„ë¡œê·¸ë¨ ì„¤ê³„ ë¬¸ì„œ (í•µì‹¬ ìš”ì•½)

## ğŸ“‹ ëª©ì°¨
1. [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#1-ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
2. [í•µì‹¬ ê¸°ëŠ¥ ì„¤ê³„](#2-í•µì‹¬-ê¸°ëŠ¥-ì„¤ê³„)
3. [ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„](#3-ë°ì´í„°ë² ì´ìŠ¤-ì„¤ê³„)
4. [UI/UX ì„¤ê³„](#4-uiux-ì„¤ê³„)
5. [êµ¬í˜„ ê³„íš](#5-êµ¬í˜„-ê³„íš)

---

## 1. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### 1.1 ì „ì²´ êµ¬ì¡° (Riverpod ê¸°ë°˜)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Presentation  â”‚    â”‚  State Mgmt     â”‚    â”‚  Business Logic â”‚    â”‚   Data Layer    â”‚
â”‚                 â”‚    â”‚   (Riverpod)    â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â€¢ ConsumerWidgetâ”‚â”€â”€â”€â–¶â”‚ â€¢ Providers     â”‚â”€â”€â”€â–¶â”‚ â€¢ Services      â”‚â”€â”€â”€â–¶â”‚ â€¢ SQLite DB     â”‚
â”‚ â€¢ Mobile UI     â”‚    â”‚ â€¢ Notifiers     â”‚    â”‚ â€¢ Exchange Mgr  â”‚    â”‚ â€¢ Memory Cache  â”‚
â”‚ â€¢ Desktop UI    â”‚    â”‚ â€¢ State         â”‚    â”‚ â€¢ Document Gen  â”‚    â”‚ â€¢ Excel Parser  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 í•µì‹¬ ì»´í¬ë„ŒíŠ¸
- **Providers (Riverpod)**: ìƒíƒœ ê´€ë¦¬ ë° ì˜ì¡´ì„± ì£¼ì…
  - `exchangeScreenProvider` - êµì²´ í™”ë©´ ìƒíƒœ
  - `servicesProvider` - ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤
  - `exchangeLogicProvider` - êµì²´ ëª¨ë“œ ë¡œì§
  - `navigationProvider` - ë„¤ë¹„ê²Œì´ì…˜ ìƒíƒœ
- **Services**: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì²˜ë¦¬
  - `ExcelService` - Excel íŒŒì¼ íŒŒì‹±
  - `ExchangeService` - 1:1 êµì²´ ë¡œì§
  - `CircularExchangeService` - ìˆœí™˜ êµì²´ ë¡œì§
  - `ChainExchangeService` - ì—°ì‡„ êµì²´ ë¡œì§
- **DocumentGenerator**: PDF/QRì½”ë“œ ìƒì„± (ì˜ˆì •)
- **DatabaseManager**: SQLite ë°ì´í„° ê´€ë¦¬ (ì˜ˆì •)

---

## 2. ë°ì´í„° êµ¬ì¡° ì„¤ê³„

### 2.1 TimeSlot (ê° ì¹¸ì˜ ì •ë³´)
| í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | ì˜ˆì‹œ |
|--------|------|------|------|
| teacher | String? | êµì‚¬ëª… | "ê¹€ì˜í¬", null |
| subject | String? | ê³¼ëª©ëª… | "ìˆ˜í•™", null |
| className | String? | í•™ê¸‰ëª… | "1-1", null |

**í‘œì‹œ ë°©ì‹**: Excelê³¼ UIì—ì„œ `className`ê³¼ `subject`ë¥¼ ë¶„ë¦¬í•˜ì—¬ í‘œì‹œ
- Excel: `1-1` (ìœ„ìª½ ì…€), `ìˆ˜í•™` (ì•„ë˜ìª½ ì…€)
- UI: `[1-1]` (ìœ„ìª½), `[ìˆ˜í•™]` (ì•„ë˜ìª½)

### 2.2 TimeTable (2ì°¨ì› ë°°ì—´ ê´€ë¦¬)
| í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | ì˜ˆì‹œ |
|--------|------|------|------|
| scheduleList | List<List<TimeSlot?>> | [ìš”ì¼][êµì‹œ] 2ì°¨ì› ë°°ì—´ | schedule[0][2] = ì›”ìš”ì¼ 3êµì‹œ |
| days | int | ìš”ì¼ ìˆ˜ (ê¸°ë³¸ 5ì¼) | 5 |
| periods | int | êµì‹œ ìˆ˜ (ê¸°ë³¸ 7êµì‹œ) | 7 |

### 2.3 êµ¬í˜„ ì½”ë“œ ì˜ˆì‹œ
```dart
// TimeSlot í´ë˜ìŠ¤
class TimeSlot {
  String? teacher;    // êµì‚¬ëª…: "ê¹€ì˜í¬", null
  String? subject;    // ê³¼ëª©ëª…: "ìˆ˜í•™", null  
  String? className;  // í•™ê¸‰ëª…: "1-1", null
  
  TimeSlot({this.teacher, this.subject, this.className});
  
  bool get isEmpty => teacher == null && subject == null && className == null;
  bool get isNotEmpty => !isEmpty;
  
  // í‘œì‹œìš© ë¬¸ìì—´ ìƒì„± (UIì—ì„œ ì‚¬ìš©)
  String get displayText {
    if (isEmpty) return '';
    return '${className ?? ''}\n${subject ?? ''}';
  }
}

// TimeTable í´ë˜ìŠ¤
class TimeTable {
  List<List<TimeSlot?>> scheduleList;  // [ìš”ì¼][êµì‹œ] 2ì°¨ì› ë°°ì—´
  int days;    // ìš”ì¼ ìˆ˜ (ê¸°ë³¸ 5ì¼)
  int periods; // êµì‹œ ìˆ˜ (ê¸°ë³¸ 7êµì‹œ)
  
  TimeTable({this.days = 5, this.periods = 7}) 
      : scheduleList = List.generate(
          days, 
          (day) => List.generate(periods, (period) => null)
        );
  
  // íŠ¹ì • ì‹œê°„ëŒ€ ì ‘ê·¼: schedule[0][2] = ì›”ìš”ì¼ 3êµì‹œ
  TimeSlot? getTimeSlot(int day, int period) {
    if (day < 0 || day >= days || period < 0 || period >= periods) {
      return null;
    }
    return scheduleList[day][period];
  }
  
  // íŠ¹ì • ì‹œê°„ëŒ€ ì„¤ì •
  void setTimeSlot(int day, int period, TimeSlot? timeSlot) {
    if (day >= 0 && day < days && period >= 0 && period < periods) {
      scheduleList[day][period] = timeSlot;
    }
  }
}
```

### 2.4 í•µì‹¬ ê¸°ëŠ¥ ì„¤ê³„

#### 2.3 SOLID ì›ì¹™ ì ìš©
- **ë‹¨ì¼ ì±…ì„ ì›ì¹™(SRP)**: ê° ì»´í¬ë„ŒíŠ¸ì™€ í•¨ìˆ˜ëŠ” í•˜ë‚˜ì˜ ì±…ì„ë§Œ ê°€ì§‘ë‹ˆë‹¤.
- **ê°œë°©-íì‡„ ì›ì¹™(OCP)**: ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì¶”ê°€í•  ë•Œ ê¸°ì¡´ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šê³  í™•ì¥í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„í•©ë‹ˆë‹¤.
- **ë¦¬ìŠ¤ì½”í”„ ì¹˜í™˜ ì›ì¹™(LSP)**: ìƒìœ„ íƒ€ì…ì˜ ê°ì²´ë¥¼ í•˜ìœ„ íƒ€ì…ì˜ ê°ì²´ë¡œ ëŒ€ì²´í•´ë„ í”„ë¡œê·¸ë¨ì˜ ì •í™•ì„±ì´ ìœ ì§€ë˜ë„ë¡ í•©ë‹ˆë‹¤.
- **ì¸í„°í˜ì´ìŠ¤ ë¶„ë¦¬ ì›ì¹™(ISP)**: í´ë¼ì´ì–¸íŠ¸ê°€ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•˜ì§€ ì•Šë„ë¡ í•©ë‹ˆë‹¤.
- **ì˜ì¡´ì„± ì—­ì „ ì›ì¹™(DIP)**: ê³ ìˆ˜ì¤€ ëª¨ë“ˆì´ ì €ìˆ˜ì¤€ ëª¨ë“ˆì— ì˜ì¡´í•˜ì§€ ì•Šë„ë¡ ì¶”ìƒí™”ì— ì˜ì¡´í•©ë‹ˆë‹¤.

#### 2.4.1 êµì²´ ì•Œê³ ë¦¬ì¦˜ (ê³„íš)

**1:1 ì§ì ‘ êµì²´**
- ê°™ì€ ìš”ì¼, ê°™ì€ êµì‹œ, ë‹¤ë¥¸ êµì‚¬, í˜¸í™˜ ê³¼ëª© ì°¾ê¸°
- ê°€ì¥ ê°„ë‹¨í•˜ê³  ì§ê´€ì ì¸ êµì²´ ë°©ì‹

**ìˆœí™˜ êµì²´ (2-5ëª…)**
- A â†’ B â†’ C â†’ A í˜•íƒœì˜ ì—°ì‡„ êµì²´
- BFS ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ê²½ë¡œ íƒìƒ‰ (êµ¬í˜„ ì‹œ ê²°ì •)

**ì œì•½ ì¡°ê±´ (ì„¤ì • ê°€ëŠ¥)**
- ê³¼ëª© ì œì•½: ê°™ì€ ê³¼ëª©ë¼ë¦¬ë§Œ vs ëª¨ë“  ê³¼ëª© í—ˆìš©
- íŠ¹ë³„ì‹¤ ì œì•½: ê°™ì€ íƒ€ì…ì˜ íŠ¹ë³„ì‹¤ë¼ë¦¬ë§Œ
- ì—°ê°• ì œì•½: ë¸”ë¡íƒ€ì„ ìˆ˜ì—…ì˜ ì—°ì†ì„± ìœ ì§€

#### 2.4.2 ë°ì´í„° ëª¨ë¸ í™•ì¥

```dart
// êµì²´ ìš”ì²­ ì •ë³´
class ExchangeRequest {
  int requesterId;      // êµì²´ ìš”ì²­ì
  int targetId;         // êµì²´ ëŒ€ìƒì  
  int scheduleId;       // êµì²´í•  ìˆ˜ì—…
  int targetScheduleId; // êµì²´ë°›ì„ ìˆ˜ì—…
  String reason;        // êµì²´ ì‚¬ìœ 
  String status;        // pending, completed, cancelled
}

// êµì²´ ì˜µì…˜
class ExchangeOption {
  int targetScheduleId;
  int targetTeacherId;
  String type;          // direct, circular
  int steps;            // ìˆœí™˜ êµì²´ ì‹œ ë‹¨ê³„ ìˆ˜
}
```

---

## 3. ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### 3.1 í•µì‹¬ í…Œì´ë¸” (ê³„íš)

```sql
-- êµì‚¬ ì •ë³´
CREATE TABLE teacher (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL,
    subject TEXT NOT NULL,
    department TEXT,
    phone TEXT,
    qr_code TEXT UNIQUE,
    is_active BOOLEAN DEFAULT 1,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- êµì‹¤ ì •ë³´ (í•„ìš”ì‹œ)
CREATE TABLE classroom (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL,
    type TEXT DEFAULT 'general',  -- general, special
    location TEXT
);

-- ì‹œê°„í‘œ
CREATE TABLE schedule (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    teacher_id INTEGER NOT NULL,
    classroom_id INTEGER,
    subject TEXT NOT NULL,
    class_name TEXT,
    day_of_week INTEGER NOT NULL,
    period INTEGER NOT NULL,
    schedule_date DATE NOT NULL,
    is_exchanged BOOLEAN DEFAULT 0,
    original_teacher_id INTEGER,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (teacher_id) REFERENCES teacher(id)
);

-- êµì²´ ì´ë ¥
CREATE TABLE exchange (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    requester_id INTEGER NOT NULL,
    target_id INTEGER NOT NULL,
    schedule_id INTEGER NOT NULL,
    target_schedule_id INTEGER NOT NULL,
    exchange_type TEXT NOT NULL,  -- direct, circular
    reason TEXT,
    status TEXT DEFAULT 'pending',
    exchange_code TEXT UNIQUE,
    requested_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    completed_at DATETIME,
    FOREIGN KEY (requester_id) REFERENCES teacher(id),
    FOREIGN KEY (target_id) REFERENCES teacher(id)
);
```

### 3.2 ì¸ë±ìŠ¤ (ì„±ëŠ¥ ìµœì í™”)
```sql
-- ìì£¼ ì‚¬ìš©í•˜ëŠ” ì¿¼ë¦¬ë¥¼ ìœ„í•œ ì¸ë±ìŠ¤
CREATE INDEX idx_schedule_teacher_date ON schedule(teacher_id, schedule_date);
CREATE INDEX idx_schedule_day_period ON schedule(day_of_week, period);
CREATE INDEX idx_exchange_requester ON exchange(requester_id);
CREATE INDEX idx_exchange_status ON exchange(status);
```

### 3.3 ë°ì´í„° íë¦„
```
Excel íŒŒì¼ (êµì‚¬ë³„ ì‹œê°„í‘œ) â†’ Excel Parser â†’ SQLite DB â† Memory Cache â†’ UI
```

### 3.4 Excel íŒŒì¼ êµ¬ì¡° ì˜ˆì‹œ
```
     A      B      C      D      E      F
1  êµì‚¬ëª…    ì›”     í™”     ìˆ˜     ëª©     ê¸ˆ
2  ê¹€êµì‚¬   1-1    1-2    2-1    2-2    3-1
            ìˆ˜í•™    ìˆ˜í•™    ìˆ˜í•™    ìˆ˜í•™    ìˆ˜í•™
3  ì´êµì‚¬   1-1    1-2    2-1    2-2    3-1
            êµ­ì–´    êµ­ì–´    êµ­ì–´    êµ­ì–´    êµ­ì–´
4  ë°•êµì‚¬   1-1    1-2    2-1    2-2    3-1
            ì˜ì–´    ì˜ì–´    ì˜ì–´    ì˜ì–´    ì˜ì–´
```

---

## 4. UI/UX ì„¤ê³„

### 4.1 ë©”ì¸ í™”ë©´ êµ¬ì„±

**ì „ì²´ ë ˆì´ì•„ì›ƒ**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Header: ë¡œê³ , ì„¤ì •, ë„ì›€ë§              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Navigation: í™ˆ, êµì²´, ê°œì¸ì‹œê°„í‘œ, ì¶œë ¥   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Calendar Widget                     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Schedule Grid (flutter_layout_grid) â”‚ â”‚
â”‚ â”‚ êµì‚¬ëª…    ì›”    í™”    ìˆ˜    ëª©    ê¸ˆ â”‚ â”‚
â”‚ â”‚ ê¹€êµì‚¬  [1-1]  [1-2]  [2-1]  [2-2]  â”‚ â”‚
â”‚ â”‚         [ìˆ˜í•™] [ìˆ˜í•™] [ìˆ˜í•™] [ìˆ˜í•™]  â”‚ â”‚
â”‚ â”‚ ì´êµì‚¬  [1-1]  [1-2]  [2-1]  [2-2]  â”‚ â”‚
â”‚ â”‚         [êµ­ì–´] [êµ­ì–´] [êµ­ì–´] [êµ­ì–´]  â”‚ â”‚
â”‚ â”‚ ë°•êµì‚¬  [1-1]  [1-2]  [2-1]  [2-2]  â”‚ â”‚
â”‚ â”‚         [ì˜ì–´] [ì˜ì–´] [ì˜ì–´] [ì˜ì–´]  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì‹œê°„í‘œ ê·¸ë¦¬ë“œ êµ¬í˜„ (flutter_layout_grid)**
- **ê·¸ë¦¬ë“œ ì‹œìŠ¤í…œ**: Excelê³¼ ë™ì¼í•œ í–‰/ì—´ êµ¬ì¡°
- **ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ**: í™”ë©´ í¬ê¸°ì— ë”°ë¼ ìë™ ì¡°ì •
- **ì…€ í¬ê¸°**: ê³ ì • í¬ê¸° ë˜ëŠ” ìœ ì—°í•œ í¬ê¸° ì„¤ì • ê°€ëŠ¥
- **ìŠ¤í¬ë¡¤**: ìˆ˜í‰/ìˆ˜ì§ ìŠ¤í¬ë¡¤ ì§€ì›

### 4.2 êµì²´ ì‹œê°í™” (ê³„íš)

**ìƒ‰ìƒ ì½”ë”©**
- ì´ˆë¡ìƒ‰: 1:1 ì§ì ‘ êµì²´ ê°€ëŠ¥
- ë…¸ë€ìƒ‰: ìˆœí™˜ êµì²´ í•„ìš”  
- ë¹¨ê°„ìƒ‰: êµì²´ ë¶ˆê°€ëŠ¥
- íŒŒë€ìƒ‰: ì„ íƒëœ ì…€

**ì¸í„°ë™ì…˜ í”Œë¡œìš°**
1. ì‹œê°„í‘œ ì…€ í´ë¦­ â†’ êµì²´ ê°€ëŠ¥ì„± í‘œì‹œ
2. êµì²´ ì˜µì…˜ ì„ íƒ â†’ í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸
3. êµì²´ ì‹¤í–‰ â†’ ê²°ê³¼ ì•Œë¦¼

### 4.3 í”Œë«í¼ë³„ ìµœì í™” (ê³„íš)

**ëª¨ë°”ì¼ (Android/iOS)**
- í„°ì¹˜ ì œìŠ¤ì²˜: í•€ì¹˜ ì¤Œ, ìŠ¤ì™€ì´í”„ ìŠ¤í¬ë¡¤
- ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ: í™”ë©´ í¬ê¸°ë³„ ìµœì í™”
- ë„¤ì´í‹°ë¸Œ UI: Material Design 3 / Cupertino

**ë°ìŠ¤í¬í†± (Windows)**
- í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤: Ctrl+Z (ì‹¤í–‰ì·¨ì†Œ), Ctrl+S (ì €ì¥)
- ë§ˆìš°ìŠ¤ ìƒí˜¸ì‘ìš©: ìš°í´ë¦­ ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´
- ë‹¤ì¤‘ ì°½: ì—¬ëŸ¬ ì‹œê°„í‘œ ë™ì‹œ í‘œì‹œ

**Windows ìœ„ì ¯ (ì„ íƒì‚¬í•­)**
- ì‹œìŠ¤í…œ íŠ¸ë ˆì´: ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰
- ì•Œë¦¼: êµì²´ ìš”ì²­, ì™„ë£Œ ì•Œë¦¼
- ë¹ ë¥¸ ì ‘ê·¼: ë”ë¸”í´ë¦­ìœ¼ë¡œ ë©”ì¸ ì•± ì‹¤í–‰

---

## 5. êµ¬í˜„ ê³„íš

### 5.1 ê°œë°œ ë‹¨ê³„ (12ì£¼) - ê³„íš

#### Phase 1: í•µì‹¬ ê¸°ëŠ¥ (4-6ì£¼)
**1-2ì£¼ì°¨: ê¸°ë³¸ êµ¬ì¡°**
- [ ] Flutter í”„ë¡œì íŠ¸ ì„¤ì •
- [ ] SQLite ë°ì´í„°ë² ì´ìŠ¤ êµ¬í˜„
- [ ] Excel íŒŒì¼ íŒŒì‹± ê¸°ëŠ¥
- [ ] ê¸°ë³¸ UI ë ˆì´ì•„ì›ƒ

**3-4ì£¼ì°¨: ì‹œê°„í‘œ í‘œì‹œ**
- [ ] ì‹œê°„í‘œ ê·¸ë¦¬ë“œ UI êµ¬í˜„
- [ ] êµì‚¬ë³„ ì‹œê°„í‘œ ë¡œë“œ
- [ ] ê¸°ë³¸ ë°ì´í„° ê´€ë¦¬

**5-6ì£¼ì°¨: 1:1 êµì²´**
- [ ] 1:1 ì§ì ‘ êµì²´ ì•Œê³ ë¦¬ì¦˜
- [ ] êµì²´ ì‹œê°í™” ê¸°ëŠ¥
- [ ] êµì²´ ì´ë ¥ ì €ì¥

#### Phase 2: ê³ ê¸‰ ê¸°ëŠ¥ (4-6ì£¼)
**7-8ì£¼ì°¨: ìˆœí™˜ êµì²´**
- [ ] ìˆœí™˜ êµì²´ ì•Œê³ ë¦¬ì¦˜ (BFS)
- [ ] ì œì•½ ì¡°ê±´ ê²€ì‚¬
- [ ] êµì²´ ì˜µì…˜ ìµœì í™”

**9-10ì£¼ì°¨: ë¬¸ì„œ ìƒì„±**
- [ ] PDF ë¬¸ì„œ ìƒì„±
- [ ] ê²°ë³´ê°• ê³„íšì„œ í…œí”Œë¦¿
- [ ] QRì½”ë“œ ìƒì„±

**11-12ì£¼ì°¨: ê°œì¸ ì‹œê°„í‘œ**
- [ ] ê°œì¸ ì‹œê°„í‘œ ì¶”ì¶œ
- [ ] êµì²´ ì½”ë“œ ì‹œìŠ¤í…œ
- [ ] ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸

#### Phase 3: ìµœì í™” (2-4ì£¼) - ì„ íƒì‚¬í•­
- [ ] Windows ìœ„ì ¯ (ì‹œìŠ¤í…œ íŠ¸ë ˆì´)
- [ ] ì„±ëŠ¥ ìµœì í™”
- [ ] ì‚¬ìš©ì í…ŒìŠ¤íŠ¸ ë° í”¼ë“œë°±

### 5.2 ê¸°ìˆ  ìŠ¤íƒ (ê³„íš)

**í•µì‹¬ ë¼ì´ë¸ŒëŸ¬ë¦¬**
```yaml
dependencies:
  flutter: sdk
  # ìƒíƒœ ê´€ë¦¬
  flutter_riverpod: ^2.4.9    # ìƒíƒœ ê´€ë¦¬ (Riverpod)
  # ë°ì´í„°ë² ì´ìŠ¤
  sqflite: ^2.3.0             # SQLite ë°ì´í„°ë² ì´ìŠ¤
  # íŒŒì¼ ì²˜ë¦¬
  excel: ^4.0.6               # Excel íŒŒì¼ ì²˜ë¦¬
  path_provider: ^2.1.1       # íŒŒì¼ ê²½ë¡œ ê´€ë¦¬
  file_picker: ^6.1.1         # íŒŒì¼ ì„ íƒ
  # UI ì»´í¬ë„ŒíŠ¸
  flutter_layout_grid: ^2.0.6 # ì‹œê°„í‘œ ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ
  table_calendar: ^3.0.9      # ìº˜ë¦°ë” ìœ„ì ¯
  # ë¬¸ì„œ ìƒì„±
  pdf: ^3.10.7                # PDF ìƒì„±
  qr_flutter: ^4.1.0          # QRì½”ë“œ ìƒì„±
```

**ê°œë°œ ë„êµ¬**
```yaml
dev_dependencies:
  flutter_test: sdk
  flutter_lints: ^5.0.0
  mockito: ^5.4.2      # í…ŒìŠ¤íŠ¸ìš© Mock ê°ì²´
```

### 5.3 í´ë” êµ¬ì¡° (ì‹¤ì œ êµ¬í˜„ë¨)
```
lib/
â”œâ”€â”€ main.dart                              # ProviderScope ë˜í¼
â”œâ”€â”€ models/                                # ë°ì´í„° ëª¨ë¸
â”‚   â”œâ”€â”€ time_slot.dart
â”‚   â”œâ”€â”€ teacher.dart
â”‚   â”œâ”€â”€ timetable_data.dart
â”‚   â”œâ”€â”€ exchange_path.dart                # ì¶”ìƒ í´ë˜ìŠ¤
â”‚   â”œâ”€â”€ one_to_one_exchange_path.dart
â”‚   â”œâ”€â”€ circular_exchange_path.dart
â”‚   â”œâ”€â”€ chain_exchange_path.dart
â”‚   â””â”€â”€ exchange_node.dart
â”œâ”€â”€ providers/                             # Riverpod ìƒíƒœ ê´€ë¦¬ âœ…
â”‚   â”œâ”€â”€ exchange_screen_provider.dart     # êµì²´ í™”ë©´ ìƒíƒœ
â”‚   â”œâ”€â”€ services_provider.dart            # ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤
â”‚   â”œâ”€â”€ exchange_logic_provider.dart      # êµì²´ ëª¨ë“œ ë¡œì§
â”‚   â””â”€â”€ navigation_provider.dart          # ë„¤ë¹„ê²Œì´ì…˜ ìƒíƒœ
â”œâ”€â”€ services/                              # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”œâ”€â”€ excel_service.dart                # Excel íŒŒì‹±
â”‚   â”œâ”€â”€ exchange_service.dart             # 1:1 êµì²´
â”‚   â”œâ”€â”€ circular_exchange_service.dart    # ìˆœí™˜ êµì²´
â”‚   â””â”€â”€ chain_exchange_service.dart       # ì—°ì‡„ êµì²´
â”œâ”€â”€ ui/                                    # UI ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ screens/                          # í™”ë©´ (ConsumerWidget)
â”‚   â”‚   â”œâ”€â”€ home_screen.dart             # ConsumerWidget
â”‚   â”‚   â”œâ”€â”€ exchange_screen.dart         # ConsumerStatefulWidget
â”‚   â”‚   â”œâ”€â”€ personal_schedule_screen.dart # StatelessWidget
â”‚   â”‚   â”œâ”€â”€ document_screen.dart         # StatelessWidget
â”‚   â”‚   â””â”€â”€ settings_screen.dart         # StatelessWidget
â”‚   â”œâ”€â”€ widgets/
â”‚   â”‚   â”œâ”€â”€ unified_exchange_sidebar.dart # StatefulWidget (ì• ë‹ˆë©”ì´ì…˜)
â”‚   â”‚   â”œâ”€â”€ timetable_grid_section.dart  # StatefulWidget (ìŠ¤í¬ë¡¤)
â”‚   â”‚   â””â”€â”€ exchange_filter_widget.dart
â”‚   â””â”€â”€ mixins/                           # Mixin (Provider ê¸°ë°˜)
â”‚       â”œâ”€â”€ exchange_mode_handler.dart
â”‚       â”œâ”€â”€ exchange_logic_mixin.dart
â”‚       â””â”€â”€ ...
â””â”€â”€ utils/                                 # ìœ í‹¸ë¦¬í‹°
    â”œâ”€â”€ constants.dart
    â”œâ”€â”€ logger.dart
    â”œâ”€â”€ exchange_algorithm.dart
    â”œâ”€â”€ exchange_visualizer.dart
    â””â”€â”€ timetable_data_source.dart
```

---

## 6. í•µì‹¬ ì„¤ê³„ ì›ì¹™ (ê³„íš)

### 6.1 ê¸°ë³¸ ì›ì¹™
- **ë‹¨ìˆœí•¨ ìš°ì„ **: ë³µì¡í•œ ì¶”ìƒí™”ë³´ë‹¤ ì‹¤ìš©ì  ì ‘ê·¼
- **ì ì§„ì  ê°œì„ **: ê¸°ë³¸ ê¸°ëŠ¥ë¶€í„° ë‹¨ê³„ë³„ í™•ì¥
- **ìœ ì—°ì„±**: ìš”êµ¬ì‚¬í•­ ë³€ê²½ì— ì‰½ê²Œ ëŒ€ì‘

### 6.2 ìƒíƒœ ê´€ë¦¬ (Riverpod) - í•„ìˆ˜ ê·œì¹™
- **ì „ì²´ ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒíƒœëŠ” Riverpodë¡œ ê´€ë¦¬**
- **Provider íŒ¨í„´**:
  - `StateNotifierProvider` - ë³µì¡í•œ ìƒíƒœ (30+ ë³€ìˆ˜)
  - `StateProvider` - ê°„ë‹¨í•œ ìƒíƒœ (ë‹¨ì¼ ê°’)
  - `Provider` - ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤
- **UI ì»´í¬ë„ŒíŠ¸**:
  - ìƒíƒœê°€ ìˆìœ¼ë©´ `ConsumerWidget` ë˜ëŠ” `ConsumerStatefulWidget`
  - ìƒíƒœê°€ ì—†ìœ¼ë©´ `StatelessWidget`
  - `setState()` ì‚¬ìš© ê¸ˆì§€ (ë¡œì»¬ UI ìƒíƒœ ì œì™¸)
- **ìƒíƒœ ì ‘ê·¼**:
  - `ref.watch()` - ë°˜ì‘í˜• UI ì—…ë°ì´íŠ¸
  - `ref.read()` - ì¼íšŒì„± ìƒíƒœ ì ‘ê·¼
  - `ref.listen()` - ìƒíƒœ ë³€ê²½ ë¦¬ìŠ¤ë„ˆ
- **ì˜ì¡´ì„± ì£¼ì…**: ì„œë¹„ìŠ¤ì™€ ì €ì¥ì†Œì˜ ìë™ ì£¼ì…
- **ìºì‹±**: ìë™ ìºì‹±ìœ¼ë¡œ ì„±ëŠ¥ ìµœì í™”
- **í…ŒìŠ¤íŠ¸**: Provider ì˜¤ë²„ë¼ì´ë“œë¡œ ì‰¬ìš´ í…ŒìŠ¤íŠ¸
- **í—ˆìš©ë˜ëŠ” StatefulWidget**:
  - ì• ë‹ˆë©”ì´ì…˜ ì»¨íŠ¸ë¡¤ëŸ¬ ê´€ë¦¬
  - ìŠ¤í¬ë¡¤ ì»¨íŠ¸ë¡¤ëŸ¬ ê´€ë¦¬
  - ê¸°íƒ€ ìˆœìˆ˜ UI ë¡œì»¬ ìƒíƒœ

### 6.3 ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­
- **ë©”ëª¨ë¦¬ ê´€ë¦¬**: ë¶ˆí•„ìš”í•œ ë°ì´í„° ë¡œë”© ë°©ì§€
- **ë°ì´í„°ë² ì´ìŠ¤**: ì¸ë±ìŠ¤ í™œìš©ìœ¼ë¡œ ì¿¼ë¦¬ ìµœì í™”
- **UI ë°˜ì‘ì„±**: êµì²´ ì‹œë®¬ë ˆì´ì…˜ì€ ì‹¤ì‹œê°„ ì²˜ë¦¬

### 6.4 ë³´ì•ˆ ë° ì•ˆì •ì„±
- **ë°ì´í„° ë¬´ê²°ì„±**: íŠ¸ëœì­ì…˜ ê¸°ë°˜ êµì²´ ì²˜ë¦¬
- **ì˜¤ë¥˜ ì²˜ë¦¬**: ì‚¬ìš©ì ì¹œí™”ì  ì˜¤ë¥˜ ë©”ì‹œì§€
- **ì˜¤í”„ë¼ì¸ ìš°ì„ **: ì¸í„°ë„· ì—†ì´ ëª¨ë“  ê¸°ëŠ¥ ì‚¬ìš©

### 6.5 ê°œë°œ ê°€ì´ë“œë¼ì¸
- **ì½”ë“œ ê°€ë…ì„±**: ëª…í™•í•œ ë³€ìˆ˜ëª…ê³¼ ì£¼ì„
- **ëª¨ë“ˆí™”**: ê¸°ëŠ¥ë³„ë¡œ ë…ë¦½ì ì¸ í´ë˜ìŠ¤ êµ¬ì„±
- **í…ŒìŠ¤íŠ¸**: í•µì‹¬ ë¡œì§ì— ëŒ€í•œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸

---

## ğŸ“ í•µì‹¬ ìš”ì•½

ì´ ì„¤ê³„ëŠ” **êµì‚¬ìš© ì‹œê°„í‘œ êµì²´ í”„ë¡œê·¸ë¨**ì˜ ì‹¤ìš©ì ì¸ êµ¬í˜„ ë°©í–¥ì„ ì œì‹œí•©ë‹ˆë‹¤.

**ì£¼ìš” íŠ¹ì§•:**
- âœ… Excel íŒŒì¼ ì™„ì „ í˜¸í™˜
- âœ… 1:1 ë° ìˆœí™˜ êµì²´ ì§€ì›
- âœ… ì‹¤ì‹œê°„ ì‹œê°í™”
- âœ… PDF/QRì½”ë“œ ìë™ ìƒì„±
- âœ… ì˜¤í”„ë¼ì¸ ìš°ì„  ì„¤ê³„
- âœ… í”Œë«í¼ í†µí•© (ëª¨ë°”ì¼/ë°ìŠ¤í¬í†±/ìœ„ì ¯)

**ê°œë°œ ìš°ì„ ìˆœìœ„:**
1. **Phase 1**: Excel íŒŒì‹± + 1:1 êµì²´ (í•µì‹¬ ê¸°ëŠ¥)
2. **Phase 2**: ìˆœí™˜ êµì²´ + ë¬¸ì„œ ìƒì„± (ê³ ê¸‰ ê¸°ëŠ¥)
3. **Phase 3**: Windows ìœ„ì ¯ + ìµœì í™” (ì„ íƒì‚¬í•­)

**ê³„íš ë‹¨ê³„ íŠ¹ì„±:**
- ğŸ”„ **ìœ ì—°í•œ ì„¤ê³„**: ê°œë°œ ê³¼ì •ì—ì„œ ìš”êµ¬ì‚¬í•­ ë³€ê²½ì— ëŒ€ì‘
- ğŸ“ **ì‹¤ìš©ì  ì ‘ê·¼**: ê³¼ë„í•œ ì¶”ìƒí™”ë³´ë‹¤ëŠ” ë°”ë¡œ êµ¬í˜„ ê°€ëŠ¥í•œ ìˆ˜ì¤€
- ğŸš€ **ì ì§„ì  ê°œë°œ**: ê¸°ë³¸ ê¸°ëŠ¥ë¶€í„° ë‹¨ê³„ë³„ë¡œ í™•ì¥

ì´ ì„¤ê³„ë¥¼ ë°”íƒ•ìœ¼ë¡œ **ì‹¤ì œ ê°œë°œí•˜ë©´ì„œ í•„ìš”í•œ ë¶€ë¶„ì„ ìƒì„¸í™”**í•´ë‚˜ê°€ë©´ ìš”êµ¬ì‚¬í•­ì„ ë§Œì¡±í•˜ëŠ” ê³ í’ˆì§ˆ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
