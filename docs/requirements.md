# 교사용 시간표 교체 프로그램 요구사항 정의서

## 1. 프로젝트 개요

### 1.1 목적
교사용 시간표 교체 업무를 효율화하고 자동화하여 병가, 출장, 연수 등으로 인한 수업 교체를 신속하게 처리

### 1.2 대상 플랫폼
- **모바일**: Android, iOS
- **데스크톱**: Windows
- **동일 기능**: 모든 플랫폼에서 동일한 기능 제공

### 1.3 사용자
- **주 사용자**: 교사 (50-60명)
- **관리자**: 교사사
- **권한**: 모든 교사가 직접 교체 가능 (승인 과정 불필요)

---

## 2. 시스템 환경 및 제약사항

### 2.1 운영 환경
- **학교 규모**: 교사 50-60명 (사용자 수정 가능)
- **수업 시간**: 하루 6-7교시 (사용자 수정 가능)
- **운영 일**: 주 5일제 (월~금)
- **특별실**: 실험실, 음악실, 체육관 등 포함
- **수업 형태**: 블록타임, 연강 수업 있음

### 2.2 기술적 제약
- **오프라인 우선**: 인터넷 연결 없이 모든 기능 사용 가능
- **데이터 소스**: Excel 파일 읽기 전용
- **저장 방식**: SQLite DB + 메모리 하이브리드

---

## 3. 주요 기능 요구사항

### 3.1 기본 설정 및 관리
- **교사 관리**: 교사 추가/삭제/수정, 담당과목 설정
- **시간표 설정**: 교시 수, 요일 수 사용자 정의
- **과목 관리**: 과목 목록 관리 및 설정
- **교실 관리**: 일반교실 및 특별실 목록 관리

### 3.2 시간표 파일 관리
- **Excel 파일 읽기**: 기존 xlsx 형태 시간표 파일 로드
- **데이터 파싱**: 교사별, 시간별 수업 정보 추출
- **데이터 검증**: 중복 배치, 누락 등 오류 자동 체크

### 3.3 시간표 교체 핵심 기능

#### 3.3.1 교체 유형
- **1:1 교체**: 두 교사 간 직접 시간 교체
- **순환 교체**: 2명~5명까지 연쇄 교체 (사용자 지정)
- **보강**: 공강 시간에 수업 배치

#### 3.3.2 교체 제약 조건
- **과목 제약**: 
  - 같은 과목끼리만 교체
  - 모든 과목 간 교체
  - 사용자 선택 옵션
- **특별실 고려**: 특별실 수업 시간 제약 반영
- **연강/블록타임**: 연속 수업 시간 고려

#### 3.3.3 교체 상황
- 병가, 출장, 연수
- 갑작스러운 일정 변경

#### 3.3.4 보강 상황
- 교체가 아닌 보강강

### 3.4 사용자 인터페이스

#### 3.4.1 시간표 표시
- **Excel 완전 호환**: 원본 xlsx와 동일한 레이아웃
- **셀 구조**: 교실번호 + 과목명 동일 위치
- **스타일**: 글꼴, 색상, 크기 Excel과 일치
- **반응형**: 모바일/태블릿/데스크톱 최적화

#### 3.4.2 교체 시각화
- **교체 가능 시간 표시**: 클릭한 셀에서 교체 가능한 셀들로 화살표 연결선
- **색상 구분**:
  - 초록색: 1:1 직접 교체 가능
  - 노란색: 순환 교체 필요  
  - 빨간색: 교체 불가능
- **인터랙션**: 
  - 첫 번째 클릭: 교체 옵션 표시
  - 두 번째 클릭: 교체 확인

#### 3.4.3 플랫폼별 최적화
- **모바일**: 터치 기반 조작, 핀치 줌
- **데스크톱**: 마우스 클릭, 키보드 단축키

### 3.5 교체 확인 및 날짜 관리
- **날짜 선택**: 캘린더에서 교체할 날짜 선택
- **요일 확인**: 선택한 날짜의 요일별 시간표 표시
- **교체 내역 저장**: 교체 이력 데이터베이스 저장

### 3.6 출력 및 문서 생성

#### 3.6.1 결보강 계획서
- **자동 생성**: 교체 내용 기반 계획서 작성
- **양식 포함**: 결재란, 각종 문구 포함
- **편집 기능**: 사용자 수정 가능
- **출력 형태**: PDF 생성 및 인쇄

#### 3.6.2 안내 문서
- **학급 안내문**: 수업 교체 안내
- **교사 안내문**: QR코드/교체코드 포함
- **미리보기**: 출력 전 문서 확인 기능

### 3.7 개인 시간표 기능
- **개인 시간표 추출**: 전체 시간표에서 개별 교사 시간표
- **QR/교체코드 시스템**: 교체 정보 전달 및 수신
- **실시간 업데이트**: 교체 시 개인 시간표 자동 반영
- **개인 데이터 관리**: 각 교사별 교체 이력 관리

### 3.8 Windows 특화 기능
- **데스크톱 위젯**: 작은 화면에 오늘 시간표 표시
- **실시간 정보**: 현재 시간, 다음 수업 알림
- **시스템 트레이**: 백그라운드 실행 및 빠른 접근

---

## 4. 데이터 관리 요구사항

### 4.1 데이터 구조
- **SQLite 데이터베이스**: 개인 시간표, 교체 이력, 설정 정보
- **메모리 캐시**: 실시간 교체 시뮬레이션, UI 상태
- **Excel 파일**: 읽기 전용 원본 시간표 소스

### 4.2 데이터 흐름
```
Excel 파일(읽기) → SQLite(개인데이터) ← 메모리(실시간작업) → 출력물
```

### 4.3 백업 및 복원
- **로컬 백업**: 데이터베이스 파일 백업
- **설정 내보내기**: 교사 정보, 시간표 설정
- **복원 기능**: 백업된 데이터 복구

---

## 5. 성능 요구사항

### 5.1 응답 시간
- **시간표 로드**: 3초 이내
- **교체 시뮬레이션**: 실시간 (1초 이내)
- **문서 생성**: 5초 이내

### 5.2 처리 용량
- **교사 수**: 최대 100명까지 확장 가능
- **동시 교체**: 10건 이상 동시 처리
- **교체 이력**: 1년간 누적 데이터 관리

---

## 6. 기술적 요구사항

### 6.1 개발 환경
- **프레임워크**: Flutter
- **데이터베이스**: SQLite
- **파일 처리**: Excel 읽기 (excel 패키지)

### 6.2 주요 라이브러리
- `sqflite`: 로컬 데이터베이스
- `excel`: Excel 파일 처리
- `pdf`: 문서 생성
- `qr_flutter`: QR코드 생성
- `table_calendar`: 날짜 선택

### 6.3 보안 요구사항
- **데이터 암호화**: 민감 정보 로컬 암호화
- **접근 제어**: 사용자별 데이터 분리
- **데이터 무결성**: 트랜잭션 기반 데이터 처리

---

## 7. 개발 우선순위

### Phase 1: 핵심 기능 (1-2개월)
- Excel 파일 읽기 및 시간표 표시
- 1:1 교체 기능
- 기본적인 UI/UX

### Phase 2: 고급 기능 (2-3개월)  
- 순환 교체 알고리즘
- 출력 및 문서 생성
- 개인 시간표 관리

### Phase 3: 최적화 및 특화 (1개월)
- Windows 위젯 기능
- 성능 최적화
- 사용자 피드백 반영

---

## 8. 추가 고려사항

### 8.1 확장성
- **다중 학교**: 여러 학교 데이터 관리 가능
- **학사 일정**: 방학, 시험 기간 등 특수 일정 연동
- **통계 기능**: 교체 현황 분석 및 보고서

### 8.2 사용성
- **직관적 조작**: 최소한의 학습으로 사용 가능
- **오류 방지**: 잘못된 교체 방지 로직
- **피드백**: 명확한 상태 표시 및 안내

### 8.3 유지보수
- **로그 시스템**: 오류 추적 및 디버깅
- **업데이트**: 자동 업데이트 또는 수동 배포
- **지원**: 사용자 매뉴얼 및 도움말